{"version":3,"sources":["/Users/matt/Sites/MarketEdge/platform-wrapper/frontend/src/components/admin/EnhancedModuleManager.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport {\n  CubeIcon,\n  PlusIcon,\n  Cog6ToothIcon,\n  ChartBarIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n  ArrowPathIcon,\n  FlagIcon,\n  EyeIcon,\n  AdjustmentsHorizontalIcon,\n  ExclamationTriangleIcon,\n  ShieldCheckIcon,\n  BoltIcon,\n  BuildingOffice2Icon\n} from '@heroicons/react/24/outline'\nimport { useModuleFeatureFlags, useModuleDiscovery, useModuleHealth } from '@/hooks/useModuleFeatureFlags'\nimport { authenticatedFetch, AuthError } from '@/lib/auth'\nimport { ModuleDiscovery } from './ModuleDiscovery'\nimport { ModuleFlagManager } from './ModuleFlagManager'\nimport { AnalyticsModule } from '@/types/module-feature-flags'\n\ntype ViewMode = 'overview' | 'discovery' | 'flags' | 'health'\n\ninterface EnhancedModuleManagerProps {\n  defaultView?: ViewMode\n  className?: string\n}\n\nexport const EnhancedModuleManager: React.FC<EnhancedModuleManagerProps> = ({\n  defaultView = 'overview',\n  className = ''\n}) => {\n  const [currentView, setCurrentView] = useState<ViewMode>(defaultView)\n  const [selectedModuleId, setSelectedModuleId] = useState<string | null>(null)\n  const [modules, setModules] = useState<AnalyticsModule[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  // Hooks for module feature flags\n  const moduleFlags = useModuleFeatureFlags()\n  const moduleDiscovery = useModuleDiscovery()\n\n  const fetchModules = async () => {\n    try {\n      setIsLoading(true)\n      const response = await authenticatedFetch('/api/v1/admin/modules')\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch modules: ${response.status}`)\n      }\n\n      const data = await response.json()\n      setModules(data.modules || [])\n      setError(null)\n    } catch (err) {\n      if (err instanceof AuthError) {\n        setError(`Authentication error: ${err.message}`)\n        return\n      }\n      setError(err instanceof Error ? err.message : 'Failed to load modules')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchModules()\n  }, [])\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'bg-green-100 text-green-800'\n      case 'testing': return 'bg-yellow-100 text-yellow-800'\n      case 'development': return 'bg-blue-100 text-blue-800'\n      case 'deprecated': return 'bg-red-100 text-red-800'\n      case 'disabled': return 'bg-gray-100 text-gray-800'\n      default: return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'core': return 'bg-purple-100 text-purple-800'\n      case 'analytics': return 'bg-blue-100 text-blue-800'\n      case 'visualization': return 'bg-green-100 text-green-800'\n      case 'integration': return 'bg-yellow-100 text-yellow-800'\n      default: return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getViewIcon = (view: ViewMode) => {\n    switch (view) {\n      case 'overview': return CubeIcon\n      case 'discovery': return EyeIcon\n      case 'flags': return FlagIcon\n      case 'health': return ShieldCheckIcon\n      default: return CubeIcon\n    }\n  }\n\n  const getModuleHealth = (moduleId: string): 'healthy' | 'degraded' | 'unavailable' => {\n    // Check if module has required flags enabled\n    const isEnabled = moduleFlags.moduleFlags[moduleId]\n    if (!isEnabled) return 'unavailable'\n    \n    // Check discovery status\n    const discoveryModule = moduleDiscovery.enabledModules.find(m => m.module_id === moduleId)\n    if (!discoveryModule) return 'unavailable'\n    \n    return discoveryModule.health || 'healthy'\n  }\n\n  const viewTabs: Array<{ key: ViewMode; label: string; description: string }> = [\n    { key: 'overview', label: 'Overview', description: 'Module registry and status' },\n    { key: 'discovery', label: 'Discovery', description: 'Feature flag-driven module discovery' },\n    { key: 'flags', label: 'Flag Management', description: 'Module feature flag hierarchy' },\n    { key: 'health', label: 'Health Monitor', description: 'Module health and dependencies' }\n  ]\n\n  const renderViewTabs = () => (\n    <div className=\"border-b border-gray-200\">\n      <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\n        {viewTabs.map((tab) => {\n          const Icon = getViewIcon(tab.key)\n          const isActive = currentView === tab.key\n          \n          return (\n            <button\n              key={tab.key}\n              onClick={() => setCurrentView(tab.key)}\n              className={`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ${\n                isActive\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <Icon className={`mr-2 h-5 w-5 ${\n                isActive ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'\n              }`} />\n              <div className=\"text-left\">\n                <div>{tab.label}</div>\n                <div className=\"text-xs opacity-75\">{tab.description}</div>\n              </div>\n            </button>\n          )\n        })}\n      </nav>\n    </div>\n  )\n\n  const renderOverview = () => {\n    if (isLoading) {\n      return (\n        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n          {[...Array(6)].map((_, i) => (\n            <div key={i} className=\"bg-white overflow-hidden shadow rounded-lg\">\n              <div className=\"p-6\">\n                <div className=\"animate-pulse\">\n                  <div className=\"flex items-center\">\n                    <div className=\"w-10 h-10 bg-gray-200 rounded\"></div>\n                    <div className=\"ml-4 flex-1\">\n                      <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                      <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                    </div>\n                  </div>\n                  <div className=\"mt-4\">\n                    <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-5\">\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <CubeIcon className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Total Modules</dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">{modules.length}</dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <CheckCircleIcon className=\"h-6 w-6 text-green-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Active</dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {modules.filter(m => m.status === 'active').length}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <FlagIcon className=\"h-6 w-6 text-blue-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Flag Enabled</dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {moduleFlags.enabledModules.length}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <ShieldCheckIcon className=\"h-6 w-6 text-purple-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Core Modules</dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {modules.filter(m => m.is_core).length}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <BuildingOffice2Icon className=\"h-6 w-6 text-yellow-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Licensed</dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {modules.filter(m => m.requires_license).length}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Modules Grid */}\n        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n          {modules.map((module) => {\n            const health = getModuleHealth(module.id)\n            const isEnabled = moduleFlags.moduleFlags[module.id] || false\n            const capabilities = moduleFlags.moduleCapabilities[module.id] || []\n\n            return (\n              <div \n                key={module.id} \n                className={`bg-white overflow-hidden shadow rounded-lg border-l-4 ${\n                  isEnabled ? 'border-l-green-400' : 'border-l-red-400'\n                }`}\n              >\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <CubeIcon className={`h-10 w-10 ${\n                          isEnabled ? 'text-green-600' : 'text-gray-400'\n                        }`} />\n                      </div>\n                      <div className=\"ml-4 flex-1\">\n                        <h3 className=\"text-lg font-medium text-gray-900\">{module.name}</h3>\n                        <p className=\"text-sm text-gray-500\">v{module.version}</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      {/* Health Status */}\n                      <div className={`w-3 h-3 rounded-full ${\n                        health === 'healthy' ? 'bg-green-500' :\n                        health === 'degraded' ? 'bg-yellow-500' : 'bg-red-500'\n                      }`} title={`Health: ${health}`} />\n                      \n                      {/* Feature Flag Status */}\n                      <FlagIcon className={`h-4 w-4 ${\n                        isEnabled ? 'text-green-500' : 'text-gray-400'\n                      }`} title={`Feature Flags: ${isEnabled ? 'Enabled' : 'Disabled'}`} />\n                    </div>\n                  </div>\n                  \n                  <p className=\"mt-4 text-sm text-gray-600 line-clamp-3\">\n                    {module.description}\n                  </p>\n                  \n                  <div className=\"mt-4 flex flex-wrap gap-2\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(module.status)}`}>\n                      {module.status}\n                    </span>\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getTypeColor(module.module_type)}`}>\n                      {module.module_type}\n                    </span>\n                    {module.is_core && (\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\n                        Core\n                      </span>\n                    )}\n                    {module.requires_license && (\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\n                        Licensed\n                      </span>\n                    )}\n                    {isEnabled && (\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                        Flag Enabled\n                      </span>\n                    )}\n                  </div>\n                  \n                  {/* Capabilities */}\n                  {capabilities.length > 0 && (\n                    <div className=\"mt-3\">\n                      <p className=\"text-xs text-gray-500 mb-1\">Capabilities ({capabilities.length}):</p>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {capabilities.slice(0, 3).map((capability) => (\n                          <span\n                            key={capability}\n                            className=\"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800\"\n                          >\n                            {capability}\n                          </span>\n                        ))}\n                        {capabilities.length > 3 && (\n                          <span className=\"text-xs text-gray-400\">\n                            +{capabilities.length - 3}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                  \n                  {module.pricing_tier && (\n                    <div className=\"mt-2\">\n                      <span className=\"text-xs text-gray-500\">\n                        Pricing: <span className=\"font-medium\">{module.pricing_tier}</span>\n                      </span>\n                    </div>\n                  )}\n                  \n                  {module.dependencies.length > 0 && (\n                    <div className=\"mt-2\">\n                      <span className=\"text-xs text-gray-500\">\n                        Dependencies: {module.dependencies.join(', ')}\n                      </span>\n                    </div>\n                  )}\n                  \n                  <div className=\"mt-6 flex justify-between items-center\">\n                    <div className=\"flex space-x-2\">\n                      <button \n                        className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50\"\n                        onClick={() => {\n                          setSelectedModuleId(module.id)\n                          setCurrentView('flags')\n                        }}\n                      >\n                        <FlagIcon className=\"h-3 w-3 mr-1\" />\n                        Flags\n                      </button>\n                      <button \n                        className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50\"\n                        onClick={() => {\n                          setSelectedModuleId(module.id)\n                          setCurrentView('health')\n                        }}\n                      >\n                        <ShieldCheckIcon className=\"h-3 w-3 mr-1\" />\n                        Health\n                      </button>\n                      <button className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50\">\n                        <ChartBarIcon className=\"h-3 w-3 mr-1\" />\n                        Analytics\n                      </button>\n                    </div>\n                    <span className=\"text-xs text-gray-400\">\n                      {new Date(module.updated_at).toLocaleDateString()}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        \n        {modules.length === 0 && !isLoading && (\n          <div className=\"text-center py-12\">\n            <CubeIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No modules found</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Analytics modules will appear here once they are registered.\n            </p>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const renderCurrentView = () => {\n    switch (currentView) {\n      case 'overview':\n        return renderOverview()\n      case 'discovery':\n        return <ModuleDiscovery onModuleSelect={setSelectedModuleId} />\n      case 'flags':\n        return <ModuleFlagManager moduleId={selectedModuleId || undefined} onModuleSelect={setSelectedModuleId} />\n      case 'health':\n        return <div className=\"text-center py-12 text-gray-500\">Module health monitoring coming soon...</div>\n      default:\n        return renderOverview()\n    }\n  }\n\n  if (error && currentView === 'overview') {\n    return (\n      <div className={`space-y-6 ${className}`}>\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">Enhanced Module Manager</h2>\n          <button\n            onClick={fetchModules}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n          >\n            <ArrowPathIcon className=\"h-4 w-4 mr-2\" />\n            Retry\n          </button>\n        </div>\n        \n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"flex\">\n            <XCircleIcon className=\"h-5 w-5 text-red-400\" />\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error Loading Modules</h3>\n              <p className=\"mt-1 text-sm text-red-700\">{error}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Enhanced Module Manager</h2>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Comprehensive module management with feature flag integration\n          </p>\n        </div>\n        <div className=\"flex space-x-3\">\n          <button\n            onClick={() => {\n              fetchModules()\n              moduleFlags.refetch()\n              moduleDiscovery.refresh()\n            }}\n            className=\"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n          >\n            <ArrowPathIcon className=\"h-4 w-4 mr-2\" />\n            Refresh All\n          </button>\n        </div>\n      </div>\n\n      {renderViewTabs()}\n      \n      <div className=\"mt-6\">\n        {renderCurrentView()}\n      </div>\n    </div>\n  )\n}"],"names":["EnhancedModuleManager","defaultView","className","currentView","setCurrentView","useState","selectedModuleId","setSelectedModuleId","modules","setModules","isLoading","setIsLoading","error","setError","moduleFlags","useModuleFeatureFlags","moduleDiscovery","useModuleDiscovery","fetchModules","response","authenticatedFetch","ok","Error","status","data","json","err","AuthError","message","useEffect","getStatusColor","getTypeColor","type","getViewIcon","view","CubeIcon","EyeIcon","FlagIcon","ShieldCheckIcon","getModuleHealth","moduleId","isEnabled","discoveryModule","enabledModules","find","m","module_id","health","viewTabs","key","label","description","renderViewTabs","div","nav","aria-label","map","tab","Icon","isActive","button","onClick","renderOverview","Array","_","i","dl","dt","dd","length","CheckCircleIcon","filter","is_core","BuildingOffice2Icon","requires_license","module","id","capabilities","moduleCapabilities","h3","name","p","version","title","span","module_type","slice","capability","pricing_tier","dependencies","join","ChartBarIcon","Date","updated_at","toLocaleDateString","renderCurrentView","ModuleDiscovery","onModuleSelect","ModuleFlagManager","undefined","h2","ArrowPathIcon","XCircleIcon","refetch","refresh"],"mappings":"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"}