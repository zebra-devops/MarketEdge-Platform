7c49cf79c67d0491913b841ed400b881
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    featureFlagKeys: function() {
        return featureFlagKeys;
    },
    useAllFeatureFlags: function() {
        return useAllFeatureFlags;
    },
    useFeatureFlag: function() {
        return useFeatureFlag;
    },
    useFeatureFlagCache: function() {
        return useFeatureFlagCache;
    },
    useFeatureFlags: function() {
        return useFeatureFlags;
    }
});
const _reactquery = require("react-query");
const _useAuth = require("./useAuth");
const _featureflagapi = require("../services/feature-flag-api");
const _featureflags = require("../types/feature-flags");
const featureFlagKeys = {
    all: [
        "featureFlags"
    ],
    single: (flagKey)=>[
            "featureFlags",
            "single",
            flagKey
        ],
    multiple: (flagKeys)=>[
            "featureFlags",
            "multiple",
            flagKeys.sort().join(",")
        ],
    enabled: (moduleId)=>[
            "featureFlags",
            "enabled",
            moduleId
        ],
    user: (userId)=>[
            "featureFlags",
            "user",
            userId
        ]
};
// Default options
const DEFAULT_OPTIONS = {
    fallbackValue: false,
    cacheTime: 5 * 60 * 1000,
    staleTime: 2 * 60 * 1000,
    refetchInterval: false,
    refetchOnWindowFocus: true,
    retryCount: 2,
    enabled: true
};
function useFeatureFlag(flagKey, options = {}) {
    const { user, isAuthenticated } = (0, _useAuth.useAuth)();
    const queryClient = (0, _reactquery.useQueryClient)();
    const mergedOptions = {
        ...DEFAULT_OPTIONS,
        ...options
    };
    const query = (0, _reactquery.useQuery)({
        queryKey: featureFlagKeys.single(flagKey),
        queryFn: ()=>_featureflagapi.featureFlagApiService.checkFeatureFlag(flagKey),
        enabled: isAuthenticated && mergedOptions.enabled && !!flagKey,
        cacheTime: mergedOptions.cacheTime,
        staleTime: mergedOptions.staleTime,
        refetchInterval: mergedOptions.refetchInterval,
        refetchOnWindowFocus: mergedOptions.refetchOnWindowFocus,
        retry: mergedOptions.retryCount,
        onError: (error)=>{
            console.warn(`Feature flag check failed for '${flagKey}':`, error);
        }
    });
    const refetch = ()=>{
        queryClient.invalidateQueries(featureFlagKeys.single(flagKey));
        return query.refetch();
    };
    // Determine flag state with fallback
    let isEnabled = mergedOptions.fallbackValue;
    let config = null;
    let error = null;
    if (query.data) {
        isEnabled = query.data.enabled;
        config = query.data.config || null;
    } else if (query.error) {
        error = query.error instanceof Error ? query.error : new Error("Unknown error");
        // Use fallback for errors unless it's a definitive "disabled" response
        if (query.error instanceof _featureflags.FeatureFlagError && query.error.statusCode === 404) {
            isEnabled = false // Flag doesn't exist, so it's definitely disabled
            ;
        }
    }
    return {
        isEnabled,
        isLoading: query.isLoading,
        error,
        config,
        refetch,
        lastUpdated: query.dataUpdatedAt ? new Date(query.dataUpdatedAt) : undefined
    };
}
function useFeatureFlags(flagKeys, options = {}) {
    const { isAuthenticated } = (0, _useAuth.useAuth)();
    const queryClient = (0, _reactquery.useQueryClient)();
    const mergedOptions = {
        ...DEFAULT_OPTIONS,
        ...options,
        fallbackValues: options.fallbackValues || {}
    };
    // Sort flag keys for consistent cache keys
    const sortedFlagKeys = [
        ...flagKeys
    ].sort();
    const query = (0, _reactquery.useQuery)({
        queryKey: featureFlagKeys.multiple(sortedFlagKeys),
        queryFn: ()=>_featureflagapi.featureFlagApiService.checkMultipleFlags(sortedFlagKeys),
        enabled: isAuthenticated && mergedOptions.enabled && flagKeys.length > 0,
        cacheTime: mergedOptions.cacheTime,
        staleTime: mergedOptions.staleTime,
        refetchInterval: mergedOptions.refetchInterval,
        refetchOnWindowFocus: mergedOptions.refetchOnWindowFocus,
        retry: mergedOptions.retryCount,
        onError: (error)=>{
            console.warn(`Feature flags check failed for keys [${flagKeys.join(", ")}]:`, error);
        }
    });
    const refetch = ()=>{
        queryClient.invalidateQueries(featureFlagKeys.multiple(sortedFlagKeys));
        return query.refetch();
    };
    // Build result objects
    const flags = {};
    const configs = {};
    flagKeys.forEach((flagKey)=>{
        if (query.data && query.data[flagKey]) {
            flags[flagKey] = query.data[flagKey].enabled;
            configs[flagKey] = query.data[flagKey].config || {};
        } else {
            // Use fallback value
            flags[flagKey] = mergedOptions.fallbackValues[flagKey] ?? mergedOptions.fallbackValue;
            configs[flagKey] = {};
        }
    });
    return {
        flags,
        isLoading: query.isLoading,
        error: query.error instanceof Error ? query.error : null,
        configs,
        refetch,
        lastUpdated: query.dataUpdatedAt ? new Date(query.dataUpdatedAt) : undefined
    };
}
function useAllFeatureFlags(moduleId, options = {}) {
    const { isAuthenticated } = (0, _useAuth.useAuth)();
    const queryClient = (0, _reactquery.useQueryClient)();
    const mergedOptions = {
        ...DEFAULT_OPTIONS,
        ...options
    };
    const query = (0, _reactquery.useQuery)({
        queryKey: featureFlagKeys.enabled(moduleId),
        queryFn: ()=>_featureflagapi.featureFlagApiService.getEnabledFeatures(moduleId),
        enabled: isAuthenticated && mergedOptions.enabled,
        cacheTime: mergedOptions.cacheTime,
        staleTime: mergedOptions.staleTime,
        refetchInterval: mergedOptions.refetchInterval,
        refetchOnWindowFocus: mergedOptions.refetchOnWindowFocus,
        retry: mergedOptions.retryCount,
        onError: (error)=>{
            console.warn("All feature flags check failed:", error);
        }
    });
    const refetch = ()=>{
        queryClient.invalidateQueries(featureFlagKeys.enabled(moduleId));
        return query.refetch();
    };
    // Transform API response to expected format
    const allFlags = {};
    if (query.data?.enabled_features) {
        Object.entries(query.data.enabled_features).forEach(([flagKey, flagData])=>{
            allFlags[flagKey] = {
                enabled: true,
                name: flagData.name,
                config: flagData.config,
                module_id: flagData.module_id
            };
        });
    }
    return {
        allFlags,
        isLoading: query.isLoading,
        error: query.error instanceof Error ? query.error : null,
        refetch,
        lastUpdated: query.dataUpdatedAt ? new Date(query.dataUpdatedAt) : undefined
    };
}
function useFeatureFlagCache() {
    const queryClient = (0, _reactquery.useQueryClient)();
    const invalidateFlag = (flagKey)=>{
        queryClient.invalidateQueries(featureFlagKeys.single(flagKey));
    };
    const invalidateMultipleFlags = (flagKeys)=>{
        queryClient.invalidateQueries(featureFlagKeys.multiple(flagKeys));
    };
    const invalidateAllFlags = ()=>{
        queryClient.invalidateQueries(featureFlagKeys.all);
    };
    const preloadFlags = async (flagKeys)=>{
        // Fire parallel prefetch requests
        const promises = flagKeys.map((flagKey)=>queryClient.prefetchQuery({
                queryKey: featureFlagKeys.single(flagKey),
                queryFn: ()=>_featureflagapi.featureFlagApiService.checkFeatureFlag(flagKey),
                staleTime: DEFAULT_OPTIONS.staleTime
            }));
        try {
            await Promise.allSettled(promises);
        } catch (error) {
            console.warn("Some flags failed to preload:", error);
        }
    };
    const getCachedFlag = (flagKey)=>{
        return queryClient.getQueryData(featureFlagKeys.single(flagKey));
    };
    const setCachedFlag = (flagKey, data)=>{
        queryClient.setQueryData(featureFlagKeys.single(flagKey), data);
    };
    return {
        invalidateFlag,
        invalidateMultipleFlags,
        invalidateAllFlags,
        preloadFlags,
        getCachedFlag,
        setCachedFlag
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0L1NpdGVzL01hcmtldEVkZ2UvcGxhdGZvcm0td3JhcHBlci9mcm9udGVuZC9zcmMvaG9va3MvdXNlRmVhdHVyZUZsYWdzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdyZWFjdC1xdWVyeSdcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuL3VzZUF1dGgnXG5pbXBvcnQgeyBmZWF0dXJlRmxhZ0FwaVNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL2ZlYXR1cmUtZmxhZy1hcGknXG5pbXBvcnQge1xuICBVc2VGZWF0dXJlRmxhZ1Jlc3VsdCxcbiAgVXNlRmVhdHVyZUZsYWdzUmVzdWx0LFxuICBVc2VBbGxGZWF0dXJlRmxhZ3NSZXN1bHQsXG4gIEZlYXR1cmVGbGFnT3B0aW9ucyxcbiAgRmVhdHVyZUZsYWdzT3B0aW9ucyxcbiAgRmVhdHVyZUZsYWdFcnJvclxufSBmcm9tICdAL3R5cGVzL2ZlYXR1cmUtZmxhZ3MnXG5cbi8vIFF1ZXJ5IGtleSBmYWN0b3J5IGZvciBjb25zaXN0ZW50IGNhY2hlIG1hbmFnZW1lbnRcbmV4cG9ydCBjb25zdCBmZWF0dXJlRmxhZ0tleXMgPSB7XG4gIGFsbDogWydmZWF0dXJlRmxhZ3MnXSBhcyBjb25zdCxcbiAgc2luZ2xlOiAoZmxhZ0tleTogc3RyaW5nKSA9PiBbJ2ZlYXR1cmVGbGFncycsICdzaW5nbGUnLCBmbGFnS2V5XSBhcyBjb25zdCxcbiAgbXVsdGlwbGU6IChmbGFnS2V5czogc3RyaW5nW10pID0+IFsnZmVhdHVyZUZsYWdzJywgJ211bHRpcGxlJywgZmxhZ0tleXMuc29ydCgpLmpvaW4oJywnKV0gYXMgY29uc3QsXG4gIGVuYWJsZWQ6IChtb2R1bGVJZD86IHN0cmluZykgPT4gWydmZWF0dXJlRmxhZ3MnLCAnZW5hYmxlZCcsIG1vZHVsZUlkXSBhcyBjb25zdCxcbiAgdXNlcjogKHVzZXJJZDogc3RyaW5nKSA9PiBbJ2ZlYXR1cmVGbGFncycsICd1c2VyJywgdXNlcklkXSBhcyBjb25zdCxcbn1cblxuLy8gRGVmYXVsdCBvcHRpb25zXG5jb25zdCBERUZBVUxUX09QVElPTlM6IFJlcXVpcmVkPEZlYXR1cmVGbGFnT3B0aW9ucz4gPSB7XG4gIGZhbGxiYWNrVmFsdWU6IGZhbHNlLFxuICBjYWNoZVRpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRlc1xuICBzdGFsZVRpbWU6IDIgKiA2MCAqIDEwMDAsIC8vIDIgbWludXRlc1xuICByZWZldGNoSW50ZXJ2YWw6IGZhbHNlLFxuICByZWZldGNoT25XaW5kb3dGb2N1czogdHJ1ZSxcbiAgcmV0cnlDb3VudDogMixcbiAgZW5hYmxlZDogdHJ1ZSxcbn1cblxuLyoqXG4gKiBIb29rIGZvciBjaGVja2luZyBhIHNpbmdsZSBmZWF0dXJlIGZsYWdcbiAqIFxuICogQHBhcmFtIGZsYWdLZXkgLSBUaGUgZmVhdHVyZSBmbGFnIGtleSB0byBjaGVja1xuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFVzZUZlYXR1cmVGbGFnUmVzdWx0IHdpdGggZmxhZyBzdGF0ZSBhbmQgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGZWF0dXJlRmxhZyhcbiAgZmxhZ0tleTogc3RyaW5nLFxuICBvcHRpb25zOiBGZWF0dXJlRmxhZ09wdGlvbnMgPSB7fVxuKTogVXNlRmVhdHVyZUZsYWdSZXN1bHQge1xuICBjb25zdCB7IHVzZXIsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQXV0aCgpXG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKVxuICBcbiAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IHsgLi4uREVGQVVMVF9PUFRJT05TLCAuLi5vcHRpb25zIH1cbiAgXG4gIGNvbnN0IHF1ZXJ5ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBmZWF0dXJlRmxhZ0tleXMuc2luZ2xlKGZsYWdLZXkpLFxuICAgIHF1ZXJ5Rm46ICgpID0+IGZlYXR1cmVGbGFnQXBpU2VydmljZS5jaGVja0ZlYXR1cmVGbGFnKGZsYWdLZXkpLFxuICAgIGVuYWJsZWQ6IGlzQXV0aGVudGljYXRlZCAmJiBtZXJnZWRPcHRpb25zLmVuYWJsZWQgJiYgISFmbGFnS2V5LFxuICAgIGNhY2hlVGltZTogbWVyZ2VkT3B0aW9ucy5jYWNoZVRpbWUsXG4gICAgc3RhbGVUaW1lOiBtZXJnZWRPcHRpb25zLnN0YWxlVGltZSxcbiAgICByZWZldGNoSW50ZXJ2YWw6IG1lcmdlZE9wdGlvbnMucmVmZXRjaEludGVydmFsLFxuICAgIHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBtZXJnZWRPcHRpb25zLnJlZmV0Y2hPbldpbmRvd0ZvY3VzLFxuICAgIHJldHJ5OiBtZXJnZWRPcHRpb25zLnJldHJ5Q291bnQsXG4gICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYEZlYXR1cmUgZmxhZyBjaGVjayBmYWlsZWQgZm9yICcke2ZsYWdLZXl9JzpgLCBlcnJvcilcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IHJlZmV0Y2ggPSAoKSA9PiB7XG4gICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoZmVhdHVyZUZsYWdLZXlzLnNpbmdsZShmbGFnS2V5KSlcbiAgICByZXR1cm4gcXVlcnkucmVmZXRjaCgpXG4gIH1cblxuICAvLyBEZXRlcm1pbmUgZmxhZyBzdGF0ZSB3aXRoIGZhbGxiYWNrXG4gIGxldCBpc0VuYWJsZWQgPSBtZXJnZWRPcHRpb25zLmZhbGxiYWNrVmFsdWVcbiAgbGV0IGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwgPSBudWxsXG4gIGxldCBlcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbFxuXG4gIGlmIChxdWVyeS5kYXRhKSB7XG4gICAgaXNFbmFibGVkID0gcXVlcnkuZGF0YS5lbmFibGVkXG4gICAgY29uZmlnID0gcXVlcnkuZGF0YS5jb25maWcgfHwgbnVsbFxuICB9IGVsc2UgaWYgKHF1ZXJ5LmVycm9yKSB7XG4gICAgZXJyb3IgPSBxdWVyeS5lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcXVlcnkuZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKVxuICAgIC8vIFVzZSBmYWxsYmFjayBmb3IgZXJyb3JzIHVubGVzcyBpdCdzIGEgZGVmaW5pdGl2ZSBcImRpc2FibGVkXCIgcmVzcG9uc2VcbiAgICBpZiAocXVlcnkuZXJyb3IgaW5zdGFuY2VvZiBGZWF0dXJlRmxhZ0Vycm9yICYmIHF1ZXJ5LmVycm9yLnN0YXR1c0NvZGUgPT09IDQwNCkge1xuICAgICAgaXNFbmFibGVkID0gZmFsc2UgLy8gRmxhZyBkb2Vzbid0IGV4aXN0LCBzbyBpdCdzIGRlZmluaXRlbHkgZGlzYWJsZWRcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlzRW5hYmxlZCxcbiAgICBpc0xvYWRpbmc6IHF1ZXJ5LmlzTG9hZGluZyxcbiAgICBlcnJvcixcbiAgICBjb25maWcsXG4gICAgcmVmZXRjaCxcbiAgICBsYXN0VXBkYXRlZDogcXVlcnkuZGF0YVVwZGF0ZWRBdCA/IG5ldyBEYXRlKHF1ZXJ5LmRhdGFVcGRhdGVkQXQpIDogdW5kZWZpbmVkLFxuICB9XG59XG5cbi8qKlxuICogSG9vayBmb3IgY2hlY2tpbmcgbXVsdGlwbGUgZmVhdHVyZSBmbGFnc1xuICogXG4gKiBAcGFyYW0gZmxhZ0tleXMgLSBBcnJheSBvZiBmZWF0dXJlIGZsYWcga2V5cyB0byBjaGVja1xuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFVzZUZlYXR1cmVGbGFnc1Jlc3VsdCB3aXRoIGZsYWdzIHN0YXRlIGFuZCB1dGlsaXRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZlYXR1cmVGbGFncyhcbiAgZmxhZ0tleXM6IHN0cmluZ1tdLFxuICBvcHRpb25zOiBGZWF0dXJlRmxhZ3NPcHRpb25zID0ge31cbik6IFVzZUZlYXR1cmVGbGFnc1Jlc3VsdCB7XG4gIGNvbnN0IHsgaXNBdXRoZW50aWNhdGVkIH0gPSB1c2VBdXRoKClcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpXG4gIFxuICBjb25zdCBtZXJnZWRPcHRpb25zID0ge1xuICAgIC4uLkRFRkFVTFRfT1BUSU9OUyxcbiAgICAuLi5vcHRpb25zLFxuICAgIGZhbGxiYWNrVmFsdWVzOiBvcHRpb25zLmZhbGxiYWNrVmFsdWVzIHx8IHt9LFxuICB9XG5cbiAgLy8gU29ydCBmbGFnIGtleXMgZm9yIGNvbnNpc3RlbnQgY2FjaGUga2V5c1xuICBjb25zdCBzb3J0ZWRGbGFnS2V5cyA9IFsuLi5mbGFnS2V5c10uc29ydCgpXG4gIFxuICBjb25zdCBxdWVyeSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogZmVhdHVyZUZsYWdLZXlzLm11bHRpcGxlKHNvcnRlZEZsYWdLZXlzKSxcbiAgICBxdWVyeUZuOiAoKSA9PiBmZWF0dXJlRmxhZ0FwaVNlcnZpY2UuY2hlY2tNdWx0aXBsZUZsYWdzKHNvcnRlZEZsYWdLZXlzKSxcbiAgICBlbmFibGVkOiBpc0F1dGhlbnRpY2F0ZWQgJiYgbWVyZ2VkT3B0aW9ucy5lbmFibGVkICYmIGZsYWdLZXlzLmxlbmd0aCA+IDAsXG4gICAgY2FjaGVUaW1lOiBtZXJnZWRPcHRpb25zLmNhY2hlVGltZSxcbiAgICBzdGFsZVRpbWU6IG1lcmdlZE9wdGlvbnMuc3RhbGVUaW1lLFxuICAgIHJlZmV0Y2hJbnRlcnZhbDogbWVyZ2VkT3B0aW9ucy5yZWZldGNoSW50ZXJ2YWwsXG4gICAgcmVmZXRjaE9uV2luZG93Rm9jdXM6IG1lcmdlZE9wdGlvbnMucmVmZXRjaE9uV2luZG93Rm9jdXMsXG4gICAgcmV0cnk6IG1lcmdlZE9wdGlvbnMucmV0cnlDb3VudCxcbiAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUud2FybihgRmVhdHVyZSBmbGFncyBjaGVjayBmYWlsZWQgZm9yIGtleXMgWyR7ZmxhZ0tleXMuam9pbignLCAnKX1dOmAsIGVycm9yKVxuICAgIH0sXG4gIH0pXG5cbiAgY29uc3QgcmVmZXRjaCA9ICgpID0+IHtcbiAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyhmZWF0dXJlRmxhZ0tleXMubXVsdGlwbGUoc29ydGVkRmxhZ0tleXMpKVxuICAgIHJldHVybiBxdWVyeS5yZWZldGNoKClcbiAgfVxuXG4gIC8vIEJ1aWxkIHJlc3VsdCBvYmplY3RzXG4gIGNvbnN0IGZsYWdzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9XG4gIGNvbnN0IGNvbmZpZ3M6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIGFueT4+ID0ge31cblxuICBmbGFnS2V5cy5mb3JFYWNoKGZsYWdLZXkgPT4ge1xuICAgIGlmIChxdWVyeS5kYXRhICYmIHF1ZXJ5LmRhdGFbZmxhZ0tleV0pIHtcbiAgICAgIGZsYWdzW2ZsYWdLZXldID0gcXVlcnkuZGF0YVtmbGFnS2V5XS5lbmFibGVkXG4gICAgICBjb25maWdzW2ZsYWdLZXldID0gcXVlcnkuZGF0YVtmbGFnS2V5XS5jb25maWcgfHwge31cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIGZhbGxiYWNrIHZhbHVlXG4gICAgICBmbGFnc1tmbGFnS2V5XSA9IG1lcmdlZE9wdGlvbnMuZmFsbGJhY2tWYWx1ZXNbZmxhZ0tleV0gPz8gbWVyZ2VkT3B0aW9ucy5mYWxsYmFja1ZhbHVlXG4gICAgICBjb25maWdzW2ZsYWdLZXldID0ge31cbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBmbGFncyxcbiAgICBpc0xvYWRpbmc6IHF1ZXJ5LmlzTG9hZGluZyxcbiAgICBlcnJvcjogcXVlcnkuZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHF1ZXJ5LmVycm9yIDogbnVsbCxcbiAgICBjb25maWdzLFxuICAgIHJlZmV0Y2gsXG4gICAgbGFzdFVwZGF0ZWQ6IHF1ZXJ5LmRhdGFVcGRhdGVkQXQgPyBuZXcgRGF0ZShxdWVyeS5kYXRhVXBkYXRlZEF0KSA6IHVuZGVmaW5lZCxcbiAgfVxufVxuXG4vKipcbiAqIEhvb2sgZm9yIGdldHRpbmcgYWxsIGVuYWJsZWQgZmVhdHVyZXMgZm9yIHRoZSBjdXJyZW50IHVzZXJcbiAqIFxuICogQHBhcmFtIG1vZHVsZUlkIC0gT3B0aW9uYWwgbW9kdWxlIElEIHRvIGZpbHRlciBmZWF0dXJlc1xuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFVzZUFsbEZlYXR1cmVGbGFnc1Jlc3VsdCB3aXRoIGFsbCBlbmFibGVkIGZsYWdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VBbGxGZWF0dXJlRmxhZ3MoXG4gIG1vZHVsZUlkPzogc3RyaW5nLFxuICBvcHRpb25zOiBPbWl0PEZlYXR1cmVGbGFnT3B0aW9ucywgJ2ZhbGxiYWNrVmFsdWUnPiA9IHt9XG4pOiBVc2VBbGxGZWF0dXJlRmxhZ3NSZXN1bHQge1xuICBjb25zdCB7IGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQXV0aCgpXG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKVxuICBcbiAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IHsgLi4uREVGQVVMVF9PUFRJT05TLCAuLi5vcHRpb25zIH1cbiAgXG4gIGNvbnN0IHF1ZXJ5ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBmZWF0dXJlRmxhZ0tleXMuZW5hYmxlZChtb2R1bGVJZCksXG4gICAgcXVlcnlGbjogKCkgPT4gZmVhdHVyZUZsYWdBcGlTZXJ2aWNlLmdldEVuYWJsZWRGZWF0dXJlcyhtb2R1bGVJZCksXG4gICAgZW5hYmxlZDogaXNBdXRoZW50aWNhdGVkICYmIG1lcmdlZE9wdGlvbnMuZW5hYmxlZCxcbiAgICBjYWNoZVRpbWU6IG1lcmdlZE9wdGlvbnMuY2FjaGVUaW1lLFxuICAgIHN0YWxlVGltZTogbWVyZ2VkT3B0aW9ucy5zdGFsZVRpbWUsXG4gICAgcmVmZXRjaEludGVydmFsOiBtZXJnZWRPcHRpb25zLnJlZmV0Y2hJbnRlcnZhbCxcbiAgICByZWZldGNoT25XaW5kb3dGb2N1czogbWVyZ2VkT3B0aW9ucy5yZWZldGNoT25XaW5kb3dGb2N1cyxcbiAgICByZXRyeTogbWVyZ2VkT3B0aW9ucy5yZXRyeUNvdW50LFxuICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS53YXJuKCdBbGwgZmVhdHVyZSBmbGFncyBjaGVjayBmYWlsZWQ6JywgZXJyb3IpXG4gICAgfSxcbiAgfSlcblxuICBjb25zdCByZWZldGNoID0gKCkgPT4ge1xuICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKGZlYXR1cmVGbGFnS2V5cy5lbmFibGVkKG1vZHVsZUlkKSlcbiAgICByZXR1cm4gcXVlcnkucmVmZXRjaCgpXG4gIH1cblxuICAvLyBUcmFuc2Zvcm0gQVBJIHJlc3BvbnNlIHRvIGV4cGVjdGVkIGZvcm1hdFxuICBjb25zdCBhbGxGbGFnczogUmVjb3JkPHN0cmluZywge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW5cbiAgICBuYW1lOiBzdHJpbmdcbiAgICBjb25maWc6IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICBtb2R1bGVfaWQ/OiBzdHJpbmdcbiAgfT4gPSB7fVxuXG4gIGlmIChxdWVyeS5kYXRhPy5lbmFibGVkX2ZlYXR1cmVzKSB7XG4gICAgT2JqZWN0LmVudHJpZXMocXVlcnkuZGF0YS5lbmFibGVkX2ZlYXR1cmVzKS5mb3JFYWNoKChbZmxhZ0tleSwgZmxhZ0RhdGFdKSA9PiB7XG4gICAgICBhbGxGbGFnc1tmbGFnS2V5XSA9IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSwgLy8gQWxsIGZsYWdzIGZyb20gdGhpcyBlbmRwb2ludCBhcmUgZW5hYmxlZFxuICAgICAgICBuYW1lOiBmbGFnRGF0YS5uYW1lLFxuICAgICAgICBjb25maWc6IGZsYWdEYXRhLmNvbmZpZyxcbiAgICAgICAgbW9kdWxlX2lkOiBmbGFnRGF0YS5tb2R1bGVfaWQsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWxsRmxhZ3MsXG4gICAgaXNMb2FkaW5nOiBxdWVyeS5pc0xvYWRpbmcsXG4gICAgZXJyb3I6IHF1ZXJ5LmVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBxdWVyeS5lcnJvciA6IG51bGwsXG4gICAgcmVmZXRjaCxcbiAgICBsYXN0VXBkYXRlZDogcXVlcnkuZGF0YVVwZGF0ZWRBdCA/IG5ldyBEYXRlKHF1ZXJ5LmRhdGFVcGRhdGVkQXQpIDogdW5kZWZpbmVkLFxuICB9XG59XG5cbi8qKlxuICogVXRpbGl0eSBob29rIGZvciBjYWNoZSBtYW5hZ2VtZW50IGFuZCBvcHRpbWl6YXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZlYXR1cmVGbGFnQ2FjaGUoKSB7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKVxuICBcbiAgY29uc3QgaW52YWxpZGF0ZUZsYWcgPSAoZmxhZ0tleTogc3RyaW5nKSA9PiB7XG4gICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoZmVhdHVyZUZsYWdLZXlzLnNpbmdsZShmbGFnS2V5KSlcbiAgfVxuXG4gIGNvbnN0IGludmFsaWRhdGVNdWx0aXBsZUZsYWdzID0gKGZsYWdLZXlzOiBzdHJpbmdbXSkgPT4ge1xuICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKGZlYXR1cmVGbGFnS2V5cy5tdWx0aXBsZShmbGFnS2V5cykpXG4gIH1cblxuICBjb25zdCBpbnZhbGlkYXRlQWxsRmxhZ3MgPSAoKSA9PiB7XG4gICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoZmVhdHVyZUZsYWdLZXlzLmFsbClcbiAgfVxuXG4gIGNvbnN0IHByZWxvYWRGbGFncyA9IGFzeW5jIChmbGFnS2V5czogc3RyaW5nW10pID0+IHtcbiAgICAvLyBGaXJlIHBhcmFsbGVsIHByZWZldGNoIHJlcXVlc3RzXG4gICAgY29uc3QgcHJvbWlzZXMgPSBmbGFnS2V5cy5tYXAoZmxhZ0tleSA9PiBcbiAgICAgIHF1ZXJ5Q2xpZW50LnByZWZldGNoUXVlcnkoe1xuICAgICAgICBxdWVyeUtleTogZmVhdHVyZUZsYWdLZXlzLnNpbmdsZShmbGFnS2V5KSxcbiAgICAgICAgcXVlcnlGbjogKCkgPT4gZmVhdHVyZUZsYWdBcGlTZXJ2aWNlLmNoZWNrRmVhdHVyZUZsYWcoZmxhZ0tleSksXG4gICAgICAgIHN0YWxlVGltZTogREVGQVVMVF9PUFRJT05TLnN0YWxlVGltZSxcbiAgICAgIH0pXG4gICAgKVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChwcm9taXNlcylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdTb21lIGZsYWdzIGZhaWxlZCB0byBwcmVsb2FkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdldENhY2hlZEZsYWcgPSAoZmxhZ0tleTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHF1ZXJ5Q2xpZW50LmdldFF1ZXJ5RGF0YShmZWF0dXJlRmxhZ0tleXMuc2luZ2xlKGZsYWdLZXkpKVxuICB9XG5cbiAgY29uc3Qgc2V0Q2FjaGVkRmxhZyA9IChmbGFnS2V5OiBzdHJpbmcsIGRhdGE6IGFueSkgPT4ge1xuICAgIHF1ZXJ5Q2xpZW50LnNldFF1ZXJ5RGF0YShmZWF0dXJlRmxhZ0tleXMuc2luZ2xlKGZsYWdLZXkpLCBkYXRhKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbnZhbGlkYXRlRmxhZyxcbiAgICBpbnZhbGlkYXRlTXVsdGlwbGVGbGFncyxcbiAgICBpbnZhbGlkYXRlQWxsRmxhZ3MsXG4gICAgcHJlbG9hZEZsYWdzLFxuICAgIGdldENhY2hlZEZsYWcsXG4gICAgc2V0Q2FjaGVkRmxhZyxcbiAgfVxufSJdLCJuYW1lcyI6WyJmZWF0dXJlRmxhZ0tleXMiLCJ1c2VBbGxGZWF0dXJlRmxhZ3MiLCJ1c2VGZWF0dXJlRmxhZyIsInVzZUZlYXR1cmVGbGFnQ2FjaGUiLCJ1c2VGZWF0dXJlRmxhZ3MiLCJhbGwiLCJzaW5nbGUiLCJmbGFnS2V5IiwibXVsdGlwbGUiLCJmbGFnS2V5cyIsInNvcnQiLCJqb2luIiwiZW5hYmxlZCIsIm1vZHVsZUlkIiwidXNlciIsInVzZXJJZCIsIkRFRkFVTFRfT1BUSU9OUyIsImZhbGxiYWNrVmFsdWUiLCJjYWNoZVRpbWUiLCJzdGFsZVRpbWUiLCJyZWZldGNoSW50ZXJ2YWwiLCJyZWZldGNoT25XaW5kb3dGb2N1cyIsInJldHJ5Q291bnQiLCJvcHRpb25zIiwiaXNBdXRoZW50aWNhdGVkIiwidXNlQXV0aCIsInF1ZXJ5Q2xpZW50IiwidXNlUXVlcnlDbGllbnQiLCJtZXJnZWRPcHRpb25zIiwicXVlcnkiLCJ1c2VRdWVyeSIsInF1ZXJ5S2V5IiwicXVlcnlGbiIsImZlYXR1cmVGbGFnQXBpU2VydmljZSIsImNoZWNrRmVhdHVyZUZsYWciLCJyZXRyeSIsIm9uRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwicmVmZXRjaCIsImludmFsaWRhdGVRdWVyaWVzIiwiaXNFbmFibGVkIiwiY29uZmlnIiwiZGF0YSIsIkVycm9yIiwiRmVhdHVyZUZsYWdFcnJvciIsInN0YXR1c0NvZGUiLCJpc0xvYWRpbmciLCJsYXN0VXBkYXRlZCIsImRhdGFVcGRhdGVkQXQiLCJEYXRlIiwidW5kZWZpbmVkIiwiZmFsbGJhY2tWYWx1ZXMiLCJzb3J0ZWRGbGFnS2V5cyIsImNoZWNrTXVsdGlwbGVGbGFncyIsImxlbmd0aCIsImZsYWdzIiwiY29uZmlncyIsImZvckVhY2giLCJnZXRFbmFibGVkRmVhdHVyZXMiLCJhbGxGbGFncyIsImVuYWJsZWRfZmVhdHVyZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmxhZ0RhdGEiLCJuYW1lIiwibW9kdWxlX2lkIiwiaW52YWxpZGF0ZUZsYWciLCJpbnZhbGlkYXRlTXVsdGlwbGVGbGFncyIsImludmFsaWRhdGVBbGxGbGFncyIsInByZWxvYWRGbGFncyIsInByb21pc2VzIiwibWFwIiwicHJlZmV0Y2hRdWVyeSIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiZ2V0Q2FjaGVkRmxhZyIsImdldFF1ZXJ5RGF0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