{"version":3,"sources":["/Users/matt/Sites/MarketEdge/platform-wrapper/frontend/src/utils/application-access.ts"],"sourcesContent":["import { ApplicationAccess } from '@/types/auth'\n\nexport type ApplicationName = 'market_edge' | 'causal_edge' | 'value_edge'\n\n/**\n * Check if a user has access to a specific application\n */\nexport function hasApplicationAccess(\n  applicationAccess: ApplicationAccess[] | undefined,\n  application: ApplicationName\n): boolean {\n  if (!applicationAccess || !Array.isArray(applicationAccess)) {\n    return false\n  }\n\n  const access = applicationAccess.find(item => item.application === application)\n  return access?.has_access || false\n}\n\n/**\n * Get all applications that a user has access to\n */\nexport function getAccessibleApplications(\n  applicationAccess: ApplicationAccess[] | undefined\n): ApplicationName[] {\n  if (!applicationAccess || !Array.isArray(applicationAccess)) {\n    return []\n  }\n\n  return applicationAccess\n    .filter(item => item.has_access)\n    .map(item => item.application)\n}\n\n/**\n * Get the user's primary (first accessible) application\n */\nexport function getPrimaryApplication(\n  applicationAccess: ApplicationAccess[] | undefined,\n  preferredOrder: ApplicationName[] = ['market_edge', 'causal_edge', 'value_edge']\n): ApplicationName | null {\n  const accessible = getAccessibleApplications(applicationAccess)\n  \n  if (accessible.length === 0) {\n    return null\n  }\n\n  // Return the first application in preferred order that user has access to\n  for (const app of preferredOrder) {\n    if (accessible.includes(app)) {\n      return app\n    }\n  }\n\n  // Fallback to first accessible application\n  return accessible[0] || null\n}\n\n/**\n * Get the route path for an application\n */\nexport function getApplicationRoute(application: ApplicationName): string {\n  const routes: Record<ApplicationName, string> = {\n    market_edge: '/market-edge',\n    causal_edge: '/causal-edge',\n    value_edge: '/value-edge'\n  }\n  \n  return routes[application]\n}\n\n/**\n * Get application display information\n */\nexport function getApplicationInfo(application: ApplicationName) {\n  const info: Record<ApplicationName, {\n    name: string\n    displayName: string\n    description: string\n    color: string\n    themeColor: string\n  }> = {\n    market_edge: {\n      name: 'Market Edge',\n      displayName: 'Market Edge',\n      description: 'Competitive Intelligence & Market Analysis',\n      color: 'from-blue-500 to-indigo-600',\n      themeColor: 'blue'\n    },\n    causal_edge: {\n      name: 'Causal Edge', \n      displayName: 'Causal Edge',\n      description: 'Business Process & Causal Analysis',\n      color: 'from-green-500 to-emerald-600',\n      themeColor: 'green'\n    },\n    value_edge: {\n      name: 'Value Edge',\n      displayName: 'Value Edge', \n      description: 'Value Engineering & ROI Analysis',\n      color: 'from-purple-500 to-violet-600',\n      themeColor: 'purple'\n    }\n  }\n  \n  return info[application]\n}\n\n/**\n * Check if user has access to any applications\n */\nexport function hasAnyApplicationAccess(\n  applicationAccess: ApplicationAccess[] | undefined\n): boolean {\n  return getAccessibleApplications(applicationAccess).length > 0\n}"],"names":["getAccessibleApplications","getApplicationInfo","getApplicationRoute","getPrimaryApplication","hasAnyApplicationAccess","hasApplicationAccess","applicationAccess","application","Array","isArray","access","find","item","has_access","filter","map","preferredOrder","accessible","length","app","includes","routes","market_edge","causal_edge","value_edge","info","name","displayName","description","color","themeColor"],"mappings":";;;;;;;;;;;IAsBgBA,yBAAyB;eAAzBA;;IAoDAC,kBAAkB;eAAlBA;;IAbAC,mBAAmB;eAAnBA;;IAxBAC,qBAAqB;eAArBA;;IA0EAC,uBAAuB;eAAvBA;;IAxGAC,oBAAoB;eAApBA;;;AAAT,SAASA,qBACdC,iBAAkD,EAClDC,WAA4B;IAE5B,IAAI,CAACD,qBAAqB,CAACE,MAAMC,OAAO,CAACH,oBAAoB;QAC3D,OAAO;IACT;IAEA,MAAMI,SAASJ,kBAAkBK,IAAI,CAACC,CAAAA,OAAQA,KAAKL,WAAW,KAAKA;IACnE,OAAOG,QAAQG,cAAc;AAC/B;AAKO,SAASb,0BACdM,iBAAkD;IAElD,IAAI,CAACA,qBAAqB,CAACE,MAAMC,OAAO,CAACH,oBAAoB;QAC3D,OAAO,EAAE;IACX;IAEA,OAAOA,kBACJQ,MAAM,CAACF,CAAAA,OAAQA,KAAKC,UAAU,EAC9BE,GAAG,CAACH,CAAAA,OAAQA,KAAKL,WAAW;AACjC;AAKO,SAASJ,sBACdG,iBAAkD,EAClDU,iBAAoC;IAAC;IAAe;IAAe;CAAa;IAEhF,MAAMC,aAAajB,0BAA0BM;IAE7C,IAAIW,WAAWC,MAAM,KAAK,GAAG;QAC3B,OAAO;IACT;IAEA,0EAA0E;IAC1E,KAAK,MAAMC,OAAOH,eAAgB;QAChC,IAAIC,WAAWG,QAAQ,CAACD,MAAM;YAC5B,OAAOA;QACT;IACF;IAEA,2CAA2C;IAC3C,OAAOF,UAAU,CAAC,EAAE,IAAI;AAC1B;AAKO,SAASf,oBAAoBK,WAA4B;IAC9D,MAAMc,SAA0C;QAC9CC,aAAa;QACbC,aAAa;QACbC,YAAY;IACd;IAEA,OAAOH,MAAM,CAACd,YAAY;AAC5B;AAKO,SAASN,mBAAmBM,WAA4B;IAC7D,MAAMkB,OAMD;QACHH,aAAa;YACXI,MAAM;YACNC,aAAa;YACbC,aAAa;YACbC,OAAO;YACPC,YAAY;QACd;QACAP,aAAa;YACXG,MAAM;YACNC,aAAa;YACbC,aAAa;YACbC,OAAO;YACPC,YAAY;QACd;QACAN,YAAY;YACVE,MAAM;YACNC,aAAa;YACbC,aAAa;YACbC,OAAO;YACPC,YAAY;QACd;IACF;IAEA,OAAOL,IAAI,CAAClB,YAAY;AAC1B;AAKO,SAASH,wBACdE,iBAAkD;IAElD,OAAON,0BAA0BM,mBAAmBY,MAAM,GAAG;AAC/D"}